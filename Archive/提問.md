以下是根據會議內容整理出的在席委員的提問及其回答或結論：

### 1. 資料表與索引的分割方案
**提問**：  
*委員1*：針對三個資料表分割方案，能否說明停機時間及影響範圍？是否能逐步實行，以減少風險？

**回答/結論**：  
*回應*：方案一（透過備份還原的方式）需要停機，影響較大，特別是在正式機環境中；方案二（建立重機索引）雖然不停機，但耗時較長，且需要大量資源；方案三（人工操作）最可控，但耗費大量人力且時間較長。各方案的執行可依照優先順序逐步進行測試，以減少風險。

**分析及評估依據**：  
- **方案一**：適合於數據量相對較小且允許長時間停機的情況，但需考慮停機對業務的影響。
- **方案二**：適合在不允許停機的環境中進行，但需確保系統資源足夠支持長時間的索引重建操作。
- **方案三**：適合於需高度控制且數據量大的情境，儘管時間成本高，但可以逐步實施，降低風險。

### 2. 索引與分割欄位的一致性
**提問**：  
*委員2*：如果索引欄位與分割欄位不一致，會對效能造成什麼影響？

**回答/結論**：  
*回應*：當索引欄位與分割欄位不一致時，查詢效能將會降低，因為分割功能無法充分利用索引，可能導致全表掃描。建議在設計分割表時，確保主要查詢條件的欄位與分割欄位一致，以充分發揮分割表和索引的優勢。

**分析及評估依據**：  
- 當分割表的查詢條件與索引不一致時，索引無法優化查詢，這會導致系統需要進行全表掃描，進而降低查詢效能。依照最佳實踐，分割表的設計應考慮主要查詢模式，以優化效能。

### 3. 硬體規格與效能
**提問**：  
*委員3*：考慮到目前的CPU使用率接近90%，是否需要增加記憶體或升級CPU？升級時應該注意哪些問題？

**回答/結論**：  
*回應*：建議升級至兩顆16核心的CPU，以應對未來需求。同時，記憶體部分應考慮增加，以支援SQL Server的In-Memory Table功能，這將顯著提升系統效能。硬體升級時需要注意記憶體與CPU的頻寬匹配，以及新舊硬體之間的相容性。

**分析及評估依據**：  
- 根據目前CPU使用率接近90%的情況，現有硬體配置已接近飽和，建議升級CPU和記憶體。SQL Server對記憶體的需求很高，特別是在使用In-Memory Table功能時，充足的記憶體可以顯著提升效能。此外，硬體升級需確保新舊硬體的相容性，以避免升級後出現潛在問題。

### 4. In-Memory Table對系統的影響
**提問**：  
*委員4*：In-Memory Table是否會影響系統開機時間及整體效能？如何設置最佳化In-Memory Table？

**回答/結論**：  
*回應*：In-Memory Table對系統效能有顯著提升，但會增加系統開機時的初始化時間，特別是在大型資料表情境下。為了最佳化In-Memory Table，建議將頻繁訪問的熱資料放置在記憶體中，並設置定期回寫機制，避免數據丟失。

**分析及評估依據**：  
- In-Memory Table會增加系統在開機時的初始化時間，因為數據需要載入記憶體。然而，這些資料表能顯著提升查詢和處理速度，適合頻繁訪問的資料。需要在設計時考慮適當的回寫機制，以確保資料完整性。

### 5. 存儲性能與配置
**提問**：  
*委員5*：針對存儲性能，是否需要使用Performance Counter檢查IOPS？TempDB是否應該放置在本地的NVMe SSD上？

**回答/結論**：  
*回應*：建議使用Performance Counter檢查IOPS，以評估現有存儲性能是否滿足需求。將TempDB放置在本地的NVMe SSD上可以顯著提升性能，特別是在高IO操作的情境下。

**分析及評估依據**：  
- Performance Counter是一種有效的方式來評估IOPS，確保存儲性能足夠支援系統需求。NVMe SSD具備較高的IOPS能力，適合放置TempDB等需要高IO操作的資料，能顯著提升系統效能。

### 6. 新硬體規格的選擇
**提問**：  
*委員6*：在選擇新硬體時，應該優先選擇高時脈的核心還是多核心？如何權衡兩者之間的取捨？

**回答/結論**：  
*回應*：在選擇SQL Server的硬體配置時，需要綜合考慮多個因素。雖然高並行處理需要多核心，單核高效能也很重要，但對於SQL Server來說，L3快取記憶體和NUMA架構的影響更為關鍵。建議選擇較少數量但擁有更大L3快取的CPU配置，例如2個實體CPU配備45MB快取記憶體，而非4個實體CPU配備22.5MB快取記憶體。這種配置能在保證足夠處理能力的同時，提供更優的數據訪問效率和系統穩定性。

**分析及評估依據**：  
- 高時脈核心適合於需要快速處理單一任務的場景，而多核心處理器則適合於高並發、多任務的環境。選擇時應根據應用程序的需求，平衡時脈與核心數，以獲得最佳的效能。
- SQL Server對L3快取記憶體的依賴度高，larger L3快取可顯著提升數據存取速度，尤其是在處理大量並發查詢和複雜計算時。
- NUMA架構下，減少實體CPU數量可以降低跨節點數據交換的開銷，提高系統整體效能。
- 雖然多核心處理器有助於處理高並發工作負載，但過多的CPU核心可能增加系統管理的複雜性，特別是在跨NUMA節點處理時。
- 2個實體CPU配備45MB快取記憶體的配置能在提供足夠計算能力的同時，最小化NUMA相關的性能損失，為SQL Server提供更優化的運行環境。
- 在選擇時仍需考慮具體的應用場景和工作負載特性。對於特定的高並發、多任務處理需求，可能需要適當增加核心數量，但應權衡快取大小和NUMA節點數量的影響。


這些回答與分析基於會議中的討論內容，並結合SQL Server和硬體性能的最佳實踐來進行評估。
